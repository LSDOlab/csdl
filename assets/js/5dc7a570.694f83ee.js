"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7874],{3905:function(e,a,t){t.d(a,{Zo:function(){return p},kt:function(){return h}});var n=t(7294);function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){i(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,i=function(e,a){if(null==e)return{};var t,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(i[t]=e[t]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var m=n.createContext({}),l=function(e){var a=n.useContext(m),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},p=function(e){var a=l(e.components);return n.createElement(m.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},d=n.forwardRef((function(e,a){var t=e.components,i=e.mdxType,r=e.originalType,m=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(t),h=i,N=d["".concat(m,".").concat(h)]||d[h]||c[h]||r;return t?n.createElement(N,o(o({ref:a},p),{},{components:t})):n.createElement(N,o({ref:a},p))}));function h(e,a){var t=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=d;var s={};for(var m in a)hasOwnProperty.call(a,m)&&(s[m]=a[m]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var l=2;l<r;l++)o[l]=t[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5762:function(e,a,t){t.r(a),t.d(a,{frontMatter:function(){return s},contentTitle:function(){return m},metadata:function(){return l},toc:function(){return p},default:function(){return d}});var n=t(7462),i=t(3366),r=(t(7294),t(3905)),o=["components"],s={title:"Object Oriented Programming"},m=void 0,l={unversionedId:"tutorial/oo",id:"tutorial/oo",isDocsHomePage:!1,title:"Object Oriented Programming",description:"------------------------------------------------------------------------",source:"@site/docs/tutorial/7-oo.mdx",sourceDirName:"tutorial",slug:"/tutorial/oo",permalink:"/csdl/docs/tutorial/oo",editUrl:"https://github.com/lsdolab/csdl/edit/main/website/docs/tutorial/7-oo.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Object Oriented Programming"},sidebar:"docs",previous:{title:"Implicit Operations",permalink:"/csdl/docs/tutorial/implicit"},next:{title:"Optimization",permalink:"/csdl/docs/tutorial/optimization"}},p=[{value:"The Model Hierarchy",id:"the-model-hierarchy",children:[]},{value:"Promotions",id:"promotions",children:[]},{value:"Connections",id:"connections",children:[]},{value:"Mixing Functional and Object Oriented Styles",id:"mixing-functional-and-object-oriented-styles",children:[]}],c={toc:p};function d(e){var a=e.components,s=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},c,s,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"the-model-hierarchy"},"The Model Hierarchy"),(0,r.kt)("ul",{className:"contains-task-list"},(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","model hierarchy figure")),(0,r.kt)("p",null,'All CSDL models exist within a hierarchy.\nA single model is the simplest hierarchy.\nThe model at the top of the model hierarchy is the "main" model,\nrepresenting the entire system (e.g. a vehicle) and the models further\ndown the hierarchy, or submodels, represent subsystems, or disciplines\n(e.g. aerodynamics, structures, propulsion).\nThe model hierarchy has a tree structure; each model has at most one\nparent (the "main" model has zero parents), and any number of children.\nAssembling a model hierarchy is done using the\n',(0,r.kt)("a",{parentName:"p",href:"/docs/lang_ref/model#add"},(0,r.kt)("inlineCode",{parentName:"a"},"Model.add"))," method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"class Example(Model):\n  def define(self):\n    self.add(Aerodynamics())\n    self.add(Structures())\n    self.add(Propulsion())\n")),(0,r.kt)("p",null,"Just as each variable in CSDL has a name, each model has a name.\nCSDL models names are automatically generated unless the user provides a\nname via the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," option in ",(0,r.kt)("inlineCode",{parentName:"p"},"Model.add"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"class Example(Model):\n  def define(self):\n    self.add(Aerodynamics(), name='aero')\n    self.add(Structures(), name='structures')\n    self.add(Propulsion(), name='prop')\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If users do not assign a name to a variable or model, a name will be\ngenerated automatically and the user will not know what the CSDL name of\na particular variable is, making that variable's run time value\neffectively inaccessible from outside the ",(0,r.kt)("inlineCode",{parentName:"p"},"Simulator")," object.\nIt is not recommended to name all variables (i.e. register all outputs),\nbut care must be taken to name all variables ",(0,r.kt)("em",{parentName:"p"},"of interest"),"."))),(0,r.kt)("p",null,"Run time values are accessed using the namespaces assigned to the models\nthat contain the variables.\nFor example, ",(0,r.kt)("inlineCode",{parentName:"p"},"'A.B.C.x'")," can be used to access data from variable ",(0,r.kt)("inlineCode",{parentName:"p"},"'x'"),"\nin model ",(0,r.kt)("inlineCode",{parentName:"p"},"'C'"),", which is contained in model ",(0,r.kt)("inlineCode",{parentName:"p"},"'B'"),", which is contained in\nmodel ",(0,r.kt)("inlineCode",{parentName:"p"},"'A'"),".\nTo assign a value to ",(0,r.kt)("inlineCode",{parentName:"p"},"'A.B.C.x'")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Simulator")," object,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"sim = Simulator(UserDefinedModel())\nsim['A.B.C.x'] = x\nsim.run()\n")),(0,r.kt)("p",null,"To read a value to ",(0,r.kt)("inlineCode",{parentName:"p"},"'A.B.C.x'")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Simulator")," object,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"sim = Simulator(UserDefinedModel())\nprint(sim['A.B.C.x'])\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"To access (read or write) a variable's run time value, use"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sim['A.x']")," for variable ",(0,r.kt)("inlineCode",{parentName:"li"},"'x'")," in model ",(0,r.kt)("inlineCode",{parentName:"li"},"'A'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sim['A.B.y']")," for variable ",(0,r.kt)("inlineCode",{parentName:"li"},"'y'")," in model ",(0,r.kt)("inlineCode",{parentName:"li"},"'B'")," in model ",(0,r.kt)("inlineCode",{parentName:"li"},"'A'"))))),(0,r.kt)("p",null,"Whenever possible, CSDL will ",(0,r.kt)("em",{parentName:"p"},"promote")," variables.\nPromoting a variable in CSDL shortens its name.\nIn the example with ",(0,r.kt)("inlineCode",{parentName:"p"},"'A.B.C.x'"),", if ",(0,r.kt)("inlineCode",{parentName:"p"},"'x'")," can be promoted to model\n",(0,r.kt)("inlineCode",{parentName:"p"},"'A'"),", it will be promoted, and it may be accessed using the key\n",(0,r.kt)("inlineCode",{parentName:"p"},"'A.x'"),".\nAutomatic promotion rules are described in ",(0,r.kt)("a",{parentName:"p",href:"#promotions"},"Promotions"),"."),(0,r.kt)("p",null,"Sometimes it is necessary to declare a connection between two models at\ndifferent branches and/or levels in the model hierarchy."),(0,r.kt)("h2",{id:"promotions"},"Promotions"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Automatic promotions are currently handled by the CSDL compiler back\nend, and not yet implemented in ",(0,r.kt)("inlineCode",{parentName:"p"},"csdl"),".\nThis caution will be removed when these features are implemented in\n",(0,r.kt)("inlineCode",{parentName:"p"},"csdl"),"."))),(0,r.kt)("p",null,"All variable names exist within a namespace corresponding to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Model"),"\nthat contains them.\nIn most cases, the model names are not necessary to access (read or\nwrite) a variable's value, because CSDL ",(0,r.kt)("em",{parentName:"p"},"promotes")," names automatically\nwhenever possible.\nPromotion involves moving a variable to a different namespace.\nAutomatically promoting all variables when possible makes accessing\nvariables less verbose.\nIf a declared ",(0,r.kt)("inlineCode",{parentName:"p"},"Variable")," and either an ",(0,r.kt)("inlineCode",{parentName:"p"},"Input")," or an ",(0,r.kt)("inlineCode",{parentName:"p"},"Output")," are\npromoted to the same level, then they form a ",(0,r.kt)("em",{parentName:"p"},"connection"),"; i.e. the data\nfrom the ",(0,r.kt)("inlineCode",{parentName:"p"},"Input"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"Output")," will transfer to the declared ",(0,r.kt)("inlineCode",{parentName:"p"},"Variable"),".\nOtherwise, the connection is left open.\nPromotions are possible in the following cases:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"An ",(0,r.kt)("inlineCode",{parentName:"li"},"Input")," can be promoted from a ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," to its parent ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," if both:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"no other sibling ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," promotes an ",(0,r.kt)("inlineCode",{parentName:"li"},"Input"),", declared ",(0,r.kt)("inlineCode",{parentName:"li"},"Variable"),",\nor ",(0,r.kt)("inlineCode",{parentName:"li"},"Output")," with the same name to the parent level."),(0,r.kt)("li",{parentName:"ul"},"the parent ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," does not contain an ",(0,r.kt)("inlineCode",{parentName:"li"},"Input")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"Output")," with the\nsame name."))),(0,r.kt)("li",{parentName:"ul"},"An ",(0,r.kt)("inlineCode",{parentName:"li"},"Output")," can be promoted from a ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," to its parent ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," if both:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"no other sibling ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," promotes an ",(0,r.kt)("inlineCode",{parentName:"li"},"Input")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"Output")," name to the\nparent level."),(0,r.kt)("li",{parentName:"ul"},"the parent ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," does not contain an ",(0,r.kt)("inlineCode",{parentName:"li"},"Input")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"Output")," with the\nsame name."))),(0,r.kt)("li",{parentName:"ul"},"A declared ",(0,r.kt)("inlineCode",{parentName:"li"},"Variable")," can be promoted from a ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," to its parent\n",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," if both:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"no other sibling ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," promotes an ",(0,r.kt)("inlineCode",{parentName:"li"},"Input"),", declared ",(0,r.kt)("inlineCode",{parentName:"li"},"Variable"),",\nor ",(0,r.kt)("inlineCode",{parentName:"li"},"Output")," with the same name and different shape to the parent\nlevel."),(0,r.kt)("li",{parentName:"ul"},"the parent ",(0,r.kt)("inlineCode",{parentName:"li"},"Model")," does not contain an ",(0,r.kt)("inlineCode",{parentName:"li"},"Input"),", declared ",(0,r.kt)("inlineCode",{parentName:"li"},"Variable"),",\nor ",(0,r.kt)("inlineCode",{parentName:"li"},"Output")," with the same name and different shape.")))),(0,r.kt)("p",null,"These promotion rules are illustrated below."),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(1966).Z})),(0,r.kt)("p",null,"CSDL users can always suppress promotion by selectively promoting\nvariables.\nCSDL users may only promote variables that are allowed to be promoted,\nhowever.\nIf the user promotes variables, all variables not promoted by the user\nthat could otherwise be promoted are not promoted.\nIn some cases, CSDL users may suppress some promotions so that other\npromotions that would have otherwise not been possible are now possible."),(0,r.kt)("p",null,"To promote selectively, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"promotes")," option:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"class Example(Model):\n  def define(self):\n    # promote two variables\n    self.add(Aerodynamics(), name='aero', promotes=['lift', 'drag'])\n    # promote automatically\n    self.add(Structures(), name='structures')\n    # suppress all promotion\n    self.add(Propulsion(), name='prop', promotes=[])\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Promotions do not change the model definition or "move" variables from\none model to another.\nThey only'),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"Make accessing run time values less verbose"),(0,r.kt)("li",{parentName:"ul"},"Ensure data is transfered between models without requiring explicit\nconnections")))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If two variables with the same name can be promoted, then they are\nconnected; i.e. their values are equal.\nThis occurs when when the output of one model is an input to another\nmodel, including when the output of one model is an input to many other\nmodels.\nCSDL automatically avoids promotion when there is a naming conflict."))),(0,r.kt)("h2",{id:"connections"},"Connections"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The process of verifying that connections are valid presented in this\nsection are not yet implemented in ",(0,r.kt)("inlineCode",{parentName:"p"},"csdl")," and rely on the back end.\nThe process of verifying that connections do not introduce cycles is not\nyet implemented.\nFor now, please use ",(0,r.kt)("inlineCode",{parentName:"p"},"Simulator.visualize_implementation")," to check that\nyour ",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," does not contain unnecessary feedback or cycles.\nThis caution will be removed when these features are implemented in\n",(0,r.kt)("inlineCode",{parentName:"p"},"csdl"),"."))),(0,r.kt)("p",null,"The purpose of connections is to transfer data from one branch of the\nmodel hierarchy to another, especially between two variables with\ndifferent names (i.e. when promotion would not automatically form a\nconnection)."),(0,r.kt)("p",null,"Connections between models are issued via the\n",(0,r.kt)("a",{parentName:"p",href:"/docs/lang_ref/model#connect"},(0,r.kt)("inlineCode",{parentName:"a"},"Model.connect"))," method.\nConnections represent equality between variables declared or defined in\ndifferent submodels, particularly submodels that are located in\ndifferent branches and/or levels of the model hierarchy.\nFor example, one discipline could compute the load on a wing due to\naerodynamic forces, and another discipline could use that load as an\ninput to compute the wing deflection.\nThese two disciplines may not be represented by submodels that are\nchildred of the same model, so any connection between them cannot be\ndefined in the same model where they are added."),(0,r.kt)("p",null,"Most of the time, connections are unnecessary."),(0,r.kt)("ul",{className:"contains-task-list"},(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","connections figure")),(0,r.kt)("p",null,"The purpose of connections is to transfer data from a ",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," in one\nbranch of the model hierarchy to another ",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," in another branch of\nthe model heirarchy, especially between two variables with different\nnames (i.e. when promotion would not automatically form a connection)."),(0,r.kt)("p",null,"An input/output can be connected to a declared variable if"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"the shapes match"),(0,r.kt)("li",{parentName:"ul"},"a connection does not already exist (including by promotion)")),(0,r.kt)("p",null,"The variable names (",(0,r.kt)("em",{parentName:"p"},"sans")," namespace) do not need to match."),(0,r.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You may only issue connections between variables using promoted names,\nand only at the lowest level possible in the model hierarchy."),(0,r.kt)("p",{parentName:"div"},"Instead of"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-py"},"self.connect('A.B.C.x', 'A.B.y')\n")),(0,r.kt)("p",{parentName:"div"},"use"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-py"},"self.connect('B.C.x', 'B.y')\n")),(0,r.kt)("p",{parentName:"div"},"within the ",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," named ",(0,r.kt)("inlineCode",{parentName:"p"},"'A'"),".\nThis may change with future versions of CSDL, but either way, this is\n",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorial/best-practices#connections"},"good practice"),"."))),(0,r.kt)("p",null,"Connections are not allowed between models if the connection would form\na cycle.\nThis is to maintain the DAG structure of a ",(0,r.kt)("inlineCode",{parentName:"p"},"Model"),".\nIf your model specification includes a cycle, you will need to create a\n",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," that computes the difference between the source (the first\nargument in ",(0,r.kt)("inlineCode",{parentName:"p"},"Model.connect"),") and the sink (the second argument in\n",(0,r.kt)("inlineCode",{parentName:"p"},"Model.connect"),") and use that ",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," to define an implicit operation."),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"When defining relationships of the form ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"x"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mi",{parentName:"mrow"},"f"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.kt)("mi",{parentName:"mrow"},"x"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"x=f(x)")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),(0,r.kt)("span",{parentName:"span",className:"mopen"},"("),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,r.kt)("span",{parentName:"span",className:"mclose"},")"))))),", this type of\nconnection will form a cycle and the compiler will emit an error\nexplaining that the ",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," that defines this relationship needs to be\nredefined so that it has an output of the form ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mi",{parentName:"mrow"},"x"),(0,r.kt)("mo",{parentName:"mrow"},"\u2212"),(0,r.kt)("mi",{parentName:"mrow"},"f"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.kt)("mi",{parentName:"mrow"},"x"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"r=x-f(x)")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.66666em",verticalAlign:"-0.08333em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),(0,r.kt)("span",{parentName:"span",className:"mopen"},"("),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,r.kt)("span",{parentName:"span",className:"mclose"},")"))))),".\nIf ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"x"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mi",{parentName:"mrow"},"f"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.kt)("mi",{parentName:"mrow"},"x"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"x=f(x)")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),(0,r.kt)("span",{parentName:"span",className:"mopen"},"("),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,r.kt)("span",{parentName:"span",className:"mclose"},")")))))," is a fixed point iteration and you are not using a Newton\ntype solver, take care not to reverse the order so that ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mi",{parentName:"mrow"},"f"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.kt)("mi",{parentName:"mrow"},"x"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,r.kt)("mo",{parentName:"mrow"},"\u2212"),(0,r.kt)("mi",{parentName:"mrow"},"x")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"r=f(x)-x")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),(0,r.kt)("span",{parentName:"span",className:"mopen"},"("),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,r.kt)("span",{parentName:"span",className:"mclose"},")"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"))))),", or\nthe residual will not converge."))),(0,r.kt)("h2",{id:"mixing-functional-and-object-oriented-styles"},"Mixing Functional and Object Oriented Styles"),(0,r.kt)("ul",{className:"contains-task-list"},(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","declare/register")))}d.isMDXComponent=!0},1966:function(e,a,t){a.Z=t.p+"assets/images/automatic-promotions-beaeef585a5b911874f4cde10f8b359a.svg"}}]);