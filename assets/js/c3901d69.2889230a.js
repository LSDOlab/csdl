"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6348,3116,3168,7466],{3905:function(e,n,r){r.d(n,{Zo:function(){return p},kt:function(){return u}});var a=r(7294);function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?i(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n){if(null==e)return{};var r,a,t=function(e,n){if(null==e)return{};var r,a,t={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],n.indexOf(r)>=0||(t[r]=e[r]);return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var s=a.createContext({}),c=function(e){var n=a.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):l(l({},n),e)),r},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var r=e.components,t=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(r),u=t,_=m["".concat(s,".").concat(u)]||m[u]||d[u]||i;return r?a.createElement(_,l(l({ref:n},p),{},{components:r})):a.createElement(_,l({ref:n},p))}));function u(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var i=r.length,l=new Array(i);l[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:t,l[1]=o;for(var c=2;c<i;c++)l[c]=r[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},1071:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return p},contentTitle:function(){return d},metadata:function(){return m},toc:function(){return u},default:function(){return x}});var a=r(7462),t=r(3366),i=(r(7294),r(3905)),l=r(9557),o=r(111),s=r(3500),c=["components"],p={},d="Implicit Relationships",m={unversionedId:"examples/Basic Examples/implicit_relationships",id:"examples/Basic Examples/implicit_relationships",isDocsHomePage:!1,title:"Implicit Relationships",description:"The `ImplicitOperation` class provides users with a way to solve for",source:"@site/docs/examples/Basic Examples/implicit_relationships.mdx",sourceDirName:"examples/Basic Examples",slug:"/examples/Basic Examples/implicit_relationships",permalink:"/csdl/docs/examples/Basic Examples/implicit_relationships",editUrl:"https://github.com/lsdolab/csdl/edit/main/website/docs/examples/Basic Examples/implicit_relationships.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Failing to Register Outputs Results in No Components",permalink:"/csdl/docs/examples/Basic Examples/ignored_outputs"},next:{title:"Array Indexing",permalink:"/csdl/docs/examples/Basic Examples/indexing"}},u=[],_={toc:u};function x(e){var n=e.components,r=(0,t.Z)(e,c);return(0,i.kt)("wrapper",(0,a.Z)({},_,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"implicit-relationships"},"Implicit Relationships"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"ImplicitOperation")," class provides users with a way to solve for\nvariables in implicit relationships.\nIt is possible to compute outputs implicitly by defining a residual\nvariable in terms of the output and inputs."),(0,i.kt)("p",null,"In the first example, we solve a quadratic equation.\nThis quadratic has two solutions: ",(0,i.kt)("inlineCode",{parentName:"p"},"1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"3"),".\nDepending on the starting value of the output variable, CSDL will\nfind one root or the other.\nThe second and third examples show how to perform a bracketed search."),(0,i.kt)(l.default,{mdxType:"WorkedExample1"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-py"},"from csdl.examples.valid.ex_implicit_apply_nonlinear import example\nfrom csdl_om import Simulator\nsim = example(Simulator)\n\nprint('using default x=1')\nsim.run()\nprint('x', sim['x'].shape)\nprint(sim['x'])\n\nprint('')\nprint('')\nprint('setting x=1.9')\nsim['x'] = 1.9\nsim.run()\nprint('x', sim['x'].shape)\nprint(sim['x'])\n\nprint('')\nprint('')\nprint('setting x=2.1')\nsim['x'] = 2.1\nsim.run()\nprint('x', sim['x'].shape)\nprint(sim['x'])\n")),(0,i.kt)("p",null,"The expressions for the residuals will will be part of a ",(0,i.kt)("inlineCode",{parentName:"p"},"Model"),"\nwithin the generated ",(0,i.kt)("inlineCode",{parentName:"p"},"ImplicitOperation")," object."),(0,i.kt)("p",null,"For problems where the residual may converge for multiple solutions, or\nwhere the residual is difficult to converge over some interval, ",(0,i.kt)("inlineCode",{parentName:"p"},"csdl"),"\nprovides an API for bracketing solutions."),(0,i.kt)(o.default,{mdxType:"WorkedExample2"}),(0,i.kt)("p",null,"Brackets may also be specified for multidimensional array values."),(0,i.kt)(s.default,{mdxType:"WorkedExample3"}))}x.isMDXComponent=!0},3500:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var a=r(7462),t=r(3366),i=(r(7294),r(3905)),l=["components"],o={},s=void 0,c={unversionedId:"worked_examples/ex_bracketed_search_bracketed_array",id:"worked_examples/ex_bracketed_search_bracketed_array",isDocsHomePage:!1,title:"ex_bracketed_search_bracketed_array",description:"`py",source:"@site/docs/worked_examples/ex_bracketed_search_bracketed_array.mdx",sourceDirName:"worked_examples",slug:"/worked_examples/ex_bracketed_search_bracketed_array",permalink:"/csdl/docs/worked_examples/ex_bracketed_search_bracketed_array",editUrl:"https://github.com/lsdolab/csdl/edit/main/website/docs/worked_examples/ex_bracketed_search_bracketed_array.mdx",tags:[],version:"current",frontMatter:{}},p=[],d={toc:p};function m(e){var n=e.components,r=(0,t.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-py"},"from csdl_om import Simulator\nfrom csdl import Model, ScipyKrylov, NewtonSolver, NonlinearBlockGS\nimport numpy as np\n\n\nclass ExampleBracketedArray(Model):\n    def define(self):\n        model = Model()\n        a = model.declare_variable('a', shape=(2, ))\n        b = model.declare_variable('b', shape=(2, ))\n        c = model.declare_variable('c', shape=(2, ))\n        x = model.declare_variable('x', shape=(2, ))\n        y = a * x**2 + b * x + c\n        model.register_output('y', y)\n\n        solve_quadratic = self.create_implicit_operation(model)\n        solve_quadratic.declare_state('x',\n                                      residual='y',\n                                      bracket=(\n                                          np.array([0, 2.]),\n                                          np.array([2, np.pi], ),\n                                      ))\n\n        a = model.declare_variable('a', val=[1, -1])\n        b = model.declare_variable('b', val=[-4, 4])\n        c = model.declare_variable('c', val=[3, -3])\n        x = solve_quadratic(a, b, c)\n\n\nsim = Simulator(ExampleBracketedArray())\nsim.run()\n\nprint('x', sim['x'].shape)\nprint(sim['x'])\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-set()"},"[]\n['y']\nx (2,)\n[1. 3.]\n")))}m.isMDXComponent=!0},111:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var a=r(7462),t=r(3366),i=(r(7294),r(3905)),l=["components"],o={},s=void 0,c={unversionedId:"worked_examples/ex_bracketed_search_bracketed_scalar",id:"worked_examples/ex_bracketed_search_bracketed_scalar",isDocsHomePage:!1,title:"ex_bracketed_search_bracketed_scalar",description:"`py",source:"@site/docs/worked_examples/ex_bracketed_search_bracketed_scalar.mdx",sourceDirName:"worked_examples",slug:"/worked_examples/ex_bracketed_search_bracketed_scalar",permalink:"/csdl/docs/worked_examples/ex_bracketed_search_bracketed_scalar",editUrl:"https://github.com/lsdolab/csdl/edit/main/website/docs/worked_examples/ex_bracketed_search_bracketed_scalar.mdx",tags:[],version:"current",frontMatter:{}},p=[],d={toc:p};function m(e){var n=e.components,r=(0,t.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-py"},"from csdl_om import Simulator\nfrom csdl import Model, ScipyKrylov, NewtonSolver, NonlinearBlockGS\nimport numpy as np\n\n\nclass ExampleBracketedScalar(Model):\n    def define(self):\n        model = Model()\n        a = model.declare_variable('a')\n        b = model.declare_variable('b')\n        c = model.declare_variable('c')\n        x = model.declare_variable('x')\n        y = a * x**2 + b * x + c\n        model.register_output('y', y)\n\n        solve_quadratic = self.create_implicit_operation(model)\n        solve_quadratic.declare_state('x', residual='y', bracket=(0, 2))\n\n        a = self.declare_variable('a', val=1)\n        b = self.declare_variable('b', val=-4)\n        c = self.declare_variable('c', val=3)\n        x = solve_quadratic(a, b, c)\n\n\nsim = Simulator(ExampleBracketedScalar())\nsim.run()\n\nprint('x', sim['x'].shape)\nprint(sim['x'])\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-set()"},"[]\n['y']\nx (1,)\n[1.]\n")))}m.isMDXComponent=!0},9557:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var a=r(7462),t=r(3366),i=(r(7294),r(3905)),l=["components"],o={},s=void 0,c={unversionedId:"worked_examples/ex_implicit_apply_nonlinear",id:"worked_examples/ex_implicit_apply_nonlinear",isDocsHomePage:!1,title:"ex_implicit_apply_nonlinear",description:"`py",source:"@site/docs/worked_examples/ex_implicit_apply_nonlinear.mdx",sourceDirName:"worked_examples",slug:"/worked_examples/ex_implicit_apply_nonlinear",permalink:"/csdl/docs/worked_examples/ex_implicit_apply_nonlinear",editUrl:"https://github.com/lsdolab/csdl/edit/main/website/docs/worked_examples/ex_implicit_apply_nonlinear.mdx",tags:[],version:"current",frontMatter:{}},p=[],d={toc:p};function m(e){var n=e.components,r=(0,t.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-py"},"from csdl_om import Simulator\nfrom csdl import Model, ScipyKrylov, NewtonSolver, NonlinearBlockGS\nimport numpy as np\n\n\nclass ExampleApplyNonlinear(Model):\n    def define(self):\n        # define internal model that defines a residual\n        model = Model()\n        a = model.declare_variable('a', val=1)\n        b = model.declare_variable('b', val=-4)\n        c = model.declare_variable('c', val=3)\n        x = model.declare_variable('x')\n        y = a * x**2 + b * x + c\n        model.register_output('y', y)\n\n        solve_quadratic = self.create_implicit_operation(model)\n        solve_quadratic.declare_state('x', residual='y')\n        solve_quadratic.nonlinear_solver = NewtonSolver(\n            solve_subsystems=False,\n            maxiter=100,\n            iprint=False,\n        )\n        solve_quadratic.linear_solver = ScipyKrylov()\n\n        a = self.declare_variable('a', val=1)\n        b = self.declare_variable('b', val=-4)\n        c = self.declare_variable('c', val=3)\n        x = solve_quadratic(a, b, c)\n\n\nsim = Simulator(ExampleApplyNonlinear())\nsim.run()\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-set()"},"[]\n['y']\n")))}m.isMDXComponent=!0}}]);